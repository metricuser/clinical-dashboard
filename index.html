
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Clinical Metrics Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 p-4">
  <h1 class="text-2xl font-bold mb-4">Clinical Metrics Entry</h1>
  <form id="entryForm" class="grid grid-cols-6 gap-2 bg-white p-4 rounded shadow mb-6">
    <select id="facility" name="facilityName" class="border p-2 rounded col-span-1" required>
      <option value="">Select Facility</option>
      <option>Allis</option><option>Best Care</option><option>Bradford</option>
      <option>Buchanan</option><option>Century Villa</option><option>Charlestown Place</option>
      <option>Dover</option><option>Morning Breeze</option><option>Park View</option>
      <option>Siena Woods</option><option>Smyrna</option>
    </select>
    <input id="segment" name="segment" class="border p-2 rounded col-span-1 bg-gray-100" placeholder="Segment" readonly required />
    <select name="month" class="border p-2 rounded col-span-1" required>
      <option value="">Month</option>
      <option>January</option><option>February</option><option>March</option><option>April</option>
      <option>May</option><option>June</option><option>July</option><option>August</option>
      <option>September</option><option>October</option><option>November</option><option>December</option>
    </select>
    <select name="year" class="border p-2 rounded col-span-1" required>
      <option value="">Year</option>
      <option>2024</option><option>2025</option><option>2026</option><option>2027</option>
      <option>2028</option><option>2029</option><option>2030</option>
    </select>
    <input name="apwResidents" placeholder="APW Residents" type="number" class="border p-2 rounded col-span-1" />
    <input name="apwNew" placeholder="APW New this period" type="number" class="border p-2 rounded col-span-1" />
    <input name="swlResidents" placeholder="SWL Residents" type="number" class="border p-2 rounded col-span-1" />
    <input name="swlNew" placeholder="SWL New this period" type="number" class="border p-2 rounded col-span-1" />
    <input name="swlUnavoidable" placeholder="SWL Unavoidable" type="number" class="border p-2 rounded col-span-1" />
    <input name="fallsResidents" placeholder="Falls Residents" type="number" class="border p-2 rounded col-span-1" />
    <input name="fallsTotal" placeholder="Total Falls" type="number" class="border p-2 rounded col-span-1" />
    <input name="fallsInjury" placeholder="Falls with Injury" type="number" class="border p-2 rounded col-span-1" />
    <input name="census" placeholder="Census" type="number" class="border p-2 rounded col-span-1" />
    <input name="notes" placeholder="Notes" class="border p-2 rounded col-span-6" />
    <button type="submit" class="bg-blue-600 text-white py-2 px-4 rounded col-span-6 hover:bg-blue-700">Submit</button>
  </form>

  <h2 class="text-xl font-semibold mb-2">Submitted Entries</h2>
  <div class="flex items-center gap-2 mb-2">
    <input id="searchInput" placeholder="Search..." class="border p-2 rounded w-1/3" />
    <button onclick="exportToCSV()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Export CSV</button>
  </div>
  <div class="overflow-x-auto bg-white shadow rounded">
    <table class="min-w-full text-sm" id="dataTable">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-2">Facility</th><th class="p-2">Segment</th><th class="p-2">Month</th><th class="p-2">Year</th>
          <th class="p-2">APW%<br/><span class="text-xs text-gray-500">(3%)</span></th>
          <th class="p-2">SWL%<br/><span class="text-xs text-gray-500">(5%)</span></th>
          <th class="p-2">Falls%<br/><span class="text-xs text-gray-500">(13%)</span></th>
          <th class="p-2">APW Risk</th><th class="p-2">SWL Risk</th><th class="p-2">Falls Risk</th>
          <th class="p-2">Census</th><th class="p-2">Notes</th><th class="p-2">Actions</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <script>
    const facilitySegments = {
      "Allis": "Midwest", "Best Care": "Southern Hospitality", "Bradford": "Northern Pride",
      "Buchanan": "Southern Hospitality", "Century Villa": "Northern Pride",
      "Charlestown Place": "Southern Hospitality", "Dover": "Southern Hospitality",
      "Morning Breeze": "Northern Pride", "Park View": "Northern Pride",
      "Siena Woods": "Northern Pride", "Smyrna": "Southern Hospitality"
    };
    document.getElementById("facility").addEventListener("change", e => {
      document.getElementById("segment").value = facilitySegments[e.target.value] || "";
    });
  </script>
</body>
</html>
